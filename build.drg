VERSION: "6.0";

build: {
    compiler: "g++";
    outputDir: "build";
    target: "dragon";
    sourceDir: "src";
    units: [
        "dragon.cpp";
        "DragonConfig.cpp";
        "commands/build.cpp";
        "commands/clean.cpp";
        "commands/init.cpp";
        "commands/presets.cpp";
        "commands/run.cpp";
        "commands/package.cpp";
    ];
    std: "gnu++17";
    flags: [
        "-Wall";
        "-Wextra";
        "-Werror";
        "-pedantic";
    ];
    includes: [
        "src";
    ];
    defines: [
        "VERSION=\"$(VERSION)\"";
    ];
    preBuild: [
        "sudo rm -rf /opt/dragon";
        "sudo mkdir -p /opt/dragon";
        "sudo chmod -R 777 /opt/dragon";
    ];
    postBuild: [
        "sudo mv build/dragon /opt/dragon/dragon";
        "sudo rm -rf /usr/local/bin/dragon";
        "sudo ln -s /opt/dragon/dragon /usr/local/bin/dragon";
    ];
};
